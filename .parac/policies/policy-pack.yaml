# Paracle Policy Pack
# Policies enforced before execution

version: "1.0"
enabled: true

# Active Policies
active_policies:
  - roadmap_governance
  - code_quality
  - security_baseline
  - approval_workflow
  - documentation_required

# Roadmap Governance
roadmap_governance:
  enabled: true
  rules:
    - name: roadmap_lock_respect
      description: Changes to locked roadmap items require explicit approval
      enforcement: blocking

    - name: phase_sequence
      description: Phases must be completed in order
      enforcement: warning

    - name: deliverable_tracking
      description: All deliverables must be tracked
      enforcement: warning

# Code Quality Policy
code_quality:
  enabled: true
  rules:
    - name: test_coverage_minimum
      description: Minimum 80% code coverage required
      threshold: 80
      enforcement: blocking

    - name: linting_required
      description: Code must pass linting (black, isort, mypy)
      enforcement: blocking

    - name: complexity_limit
      description: Cyclomatic complexity < 10
      threshold: 10
      enforcement: warning

    - name: no_todos_in_pr
      description: No TODO comments in pull requests
      enforcement: warning

# Security Policy
security_baseline:
  enabled: true
  rules:
    - name: no_hardcoded_secrets
      description: No API keys or passwords in code
      enforcement: blocking

    - name: dependency_scan
      description: All dependencies must be scanned for vulnerabilities
      enforcement: blocking
      severity_threshold: high

    - name: secure_defaults
      description: Secure by default configuration
      enforcement: warning

# Approval Workflow
approval_workflow:
  enabled: true
  rules:
    - name: architecture_changes
      description: Architecture changes require architect review
      approvers: [architect]
      enforcement: blocking

    - name: breaking_changes
      description: Breaking changes require team consensus
      approvers: [architect, pm]
      enforcement: blocking

    - name: security_changes
      description: Security-related changes require security review
      approvers: [reviewer, architect]
      enforcement: blocking

# Documentation Policy
documentation_required:
  enabled: true
  rules:
    - name: public_api_documented
      description: All public APIs must have docstrings
      enforcement: blocking

    - name: readme_updated
      description: README updated for new features
      enforcement: warning

    - name: changelog_entry
      description: Changelog entry for each change
      enforcement: warning

# Deployment Policy
deployment:
  enabled: true
  rules:
    - name: tests_must_pass
      description: All tests must pass before deployment
      enforcement: blocking

    - name: staging_first
      description: Deploy to staging before production
      enforcement: blocking

    - name: rollback_plan
      description: Rollback plan documented
      enforcement: warning

# Resource Limits
resource_limits:
  enabled: true
  rules:
    - name: max_file_size
      description: Maximum file size limit
      threshold: 1000 # lines
      enforcement: warning

    - name: max_function_length
      description: Maximum function length
      threshold: 50 # lines
      enforcement: warning

# Exception Process
exceptions:
  process: documented_in_decisions_md
  approval_required: true
  expiration: 30_days
