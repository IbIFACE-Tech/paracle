# Paracle v0.0.1 - Roadmap Canonique
# Status: Active | Version: 1.2 | Verrouillable: true

version: 0.0.1
timeline: 38_weeks # Extended from 32 weeks - Phase 6-8 strategic refocus
status: in_progress
current_phase: phase_5
last_update: "2026-01-06"

# =============================================================================
# RECENT COMPLETIONS (2026-01-06)
# =============================================================================
recent_completions:
  - date: "2026-01-06"
    item: "Security Agent Implementation"
    description: "Created comprehensive security agent with 12 tools, 4 skills, full testing and documentation"
    impact: "Paracle now has 8th agent - Security specialist for vulnerability detection, compliance checking, threat modeling"
    deliverables:
      - ".parac/agents/specs/security.md (500+ lines specification)"
      - "Security agent manifest entry (12 tools: bandit, safety, semgrep, detect-secrets, pip-audit, trivy, static_analysis, security_scan, vulnerability_detector, secret_scanner, dependency_auditor, compliance_checker)"
      - "Skill assignments (security-hardening primary owner, testing-qa, paracle-development, performance-optimization)"
      - "docs/security-agent.md (complete usage guide, workflows, CI/CD integration)"
      - "examples/security_agent.py (350+ lines, 6-step demonstration)"
      - "tests/integration/test_security_agent.py (21 tests, 100% passing)"
      - "Specialized agents via inheritance: Python Security Specialist, API Security Specialist"
    stats:
      files_changed: 8
      lines_added: 2841
      tests_created: 21
      tests_passing: 21
      test_coverage: "100%"
    strategic_value: "Foundation for secure development lifecycle, OWASP/CWE/GDPR/SOC2 compliance, pre-release security validation"

  - date: "2026-01-06"
    item: "ADR-018: Executable Tools for Agent Autonomy"
    description: "Implemented 25+ executable tools across 7 agent types"
    impact: "Agents can now execute tools programmatically, not just reference them"
    deliverables:
      - "architect_tools.py (3 tools: code analysis, diagram generation, pattern matching)"
      - "coder_tools.py (3 tools: code generation, refactoring, testing)"
      - "reviewer_tools.py (3 tools: static analysis, security scan, code review)"
      - "tester_tools.py (3 tools: test generation, execution, coverage analysis)"
      - "pm_tools.py (3 tools: task tracking, milestone management, team coordination)"
      - "documenter_tools.py (3 tools: markdown generation, API docs, diagrams)"
      - "releasemanager_tools.py (4 tools: version management, changelog, CI/CD, publishing)"
      - "agent_tool_registry.py (registry mapping agents to tools)"
    stats:
      files_changed: 15
      lines_added: 3352
      tools_implemented: 25
    strategic_value: "Foundation for Phase 6 DX - agent capabilities discovery, tool examples"

  - date: "2026-01-06"
    item: "ADR-019: MCP Package Extraction"
    description: "Extracted MCP tools to separate paracle_mcp package"
    impact: "Better modularity, clearer package boundaries"
    deliverables:
      - "paracle_mcp package created"
      - "MCP client and registry moved from paracle_tools"
      - "29 files updated with new imports"
      - "Backward compatibility maintained via re-exports"
    stats:
      files_changed: 29
      insertions: 640
      deletions: 534
      packages_total: 15
    strategic_value: "Cleaner architecture for Phase 6 lite mode, independent MCP usage"

# =============================================================================
# PERSISTENCE STRATEGY (ADR-015)
# =============================================================================
persistence_strategy:
  description: |
    Hybrid persistence architecture with three layers:
    1. YAML/Markdown files - Human-readable configs (source of truth for definitions)
    2. SQLite/PostgreSQL - Runtime data (executions, events, audit)
    3. ChromaDB/pgvector - Vector storage (RAG, memory, embeddings)

  layers:
    - id: file_layer
      name: "YAML/Markdown Files"
      scope: "Configuration & Definitions"
      status: implemented
      location: ".parac/"
      contents:
        - "Agent specifications (.parac/agents/specs/)"
        - "Workflow definitions (.parac/workflows/)"
        - "Tool configurations"
        - "Governance state (roadmap, decisions)"
        - "Project configuration"
      benefits:
        - "Human-readable and editable"
        - "Git-friendly (version control)"
        - "Declarative configuration"
        - "Zero external dependencies"

    - id: relational_layer
      name: "SQLite → PostgreSQL"
      scope: "Runtime Data"
      status: implementing # Phase 4
      versions:
        v0.0.1: "SQLite (file-based, zero config)"
        v0.5.0: "PostgreSQL option (scaling)"
      contents:
        - "Agent runtime instances"
        - "Workflow executions and results"
        - "Event history"
        - "Audit logs (ISO 42001)"
        - "Session data"
      benefits:
        - "ACID transactions"
        - "Queryable history"
        - "Scalable to production"

    - id: vector_layer
      name: "ChromaDB → pgvector"
      scope: "AI-Native Storage"
      status: planned # Phase 6
      versions:
        v0.5.0: "ChromaDB (embedded, simple)"
        v0.7.0: "pgvector option (unified)"
      contents:
        - "Document embeddings (RAG)"
        - "Agent memory"
        - "Semantic code search"
        - "Conversation history"
      benefits:
        - "Similarity search"
        - "Context retrieval"
        - "Long-term memory"

  migration_path:
    - version: "v0.0.1"
      storage: "YAML + SQLite"
      description: "Config in files, runtime in SQLite"
    - version: "v0.1.0"
      storage: "+ Event persistence"
      description: "Persistent event store"
    - version: "v0.5.0"
      storage: "+ ChromaDB"
      description: "RAG and embeddings"
    - version: "v0.7.0"
      storage: "+ PostgreSQL option"
      description: "Production scaling"
    - version: "v1.0.0"
      storage: "+ pgvector"
      description: "Unified relational + vector"

# CLI Commands Roadmap Summary
cli_roadmap:
  total_commands: 89 # +8 MCP server commands (Phase 7)
  implemented: 31 # Updated: +6 cost commands
  planned: 58 # Updated after MCP server addition

  # Priority 0 - Essential (Phase 3-4)
  p0_essential:
    - command: paracle serve
      status: implemented
      phase: phase_3
      description: "Start API server (FastAPI)"
    - command: paracle agents create
      status: planned
      phase: phase_5
      description: "Create agent from template"
    - command: paracle agents run
      status: planned
      phase: phase_5
      description: "Run agent interactively"

  # Priority 1 - Core Features (Phase 2-4)
  p1_core:
    - paracle workflow list/run/status/cancel # Implemented
    - paracle tools list/info/register/test # Implemented
    - paracle providers list/add/test/default # Implemented

  # Priority 2 - Developer Experience (Phase 4)
  p2_devex:
    - paracle dev
    - paracle logs
    - paracle events list/replay
    - paracle config show/set/get/env

  # Priority 3 - Execution Safety (Phase 5)
  p3_safety:
    - paracle sandbox create/list/cleanup
    - paracle review list/approve/reject

  # Priority 4 - Iteration & Profiles (Phase 6)
  p4_iteration:
    - paracle workflow retry/continue
    - paracle profiles list/create
    - paracle agents switch-model
    - paracle task list/create/move/assign/view # ADR-021 Kanban
    - paracle board show/stats # ADR-021 Kanban

  # Priority 5 - Git Integration (Phase 7)
  p5_git:
    - paracle git init/branches/merge/pr-create/cleanup

  # Priority 6 - Monitoring & Templates (Phase 8)
  p6_monitoring:
    - paracle stream/pause/resume
    - paracle init --template
    - paracle templates list
    - paracle history compare

  # Priority 7 - Notifications (Phase 9)
  p7_notifications:
    - paracle notify configure
    - paracle alerts list
    - paracle replay
    - paracle compare

# Recent Achievements
recent_achievements:
  - id: cost_management_system
    name: "Comprehensive Cost Management System"
    completed: "2026-01-05"
    impact: high
    description: |
      Full cost tracking, budget enforcement, and reporting system:
      - Cost calculation from model pricing (per million tokens)
      - Budget enforcement with daily/monthly/workflow/total limits
      - Alert thresholds (warning at 80%, critical at 95%)
      - SQLite persistence for cost records
      - Integration with workflow execution via ExecutionCost
    deliverables:
      - CostTracker with budget enforcement
      - CostConfig with project.yaml integration
      - BudgetExceededError for blocking mode
      - ExecutionCost in workflow context
      - CLI commands: paracle cost report/usage/budget/estimate/pricing/cleanup
      - 22 unit tests with full coverage

  - id: log_management_implementation
    name: "Enterprise Log Management System"
    completed: "2026-01-05"
    impact: high
    description: |
      CrowdStrike best-practice log management with centralized aggregation,
      search, indexing, anomaly detection, and compliance reporting.
    deliverables:
      - LogManager with SQLite FTS5 indexing
      - Search/aggregate/stats APIs
      - Compliance reporting (ISO42001, GDPR)
      - Log compression and retention policies
      - CLI commands: paracle logs search/aggregate/stats/anomalies

  - id: phase_4_api_cli
    name: "Phase 4 API & CLI Enhancement"
    completed: "2026-01-04"
    impact: critical
    description: |
      Comprehensive API server with security, CLI commands, and MCP integration.
      613 tests passing, 87.5% coverage.
    deliverables:
      - REST API with 47+ endpoints (11 routers)
      - JWT authentication
      - Rate limiting and security headers
      - Workflow execution endpoints
      - CLI commands for workflow, tools, providers
      - Approval workflow system (API + routes)
      - IDE sync commands (5 IDE formats)

  - id: package_uniformization
    name: "Package Uniformization"
    completed: "2026-01-04"
    impact: medium
    description: |
      Standardized all package __init__.py files with proper exports.
      Unified exception handling with error codes.
    deliverables:
      - Consistent __all__ exports
      - Error codes (PARACLE-XXX-NNN)
      - Removed empty directories

  - id: phase_0_foundation
    name: "Phase 0 Foundation Complete"
    completed: "2025-12-24"
    impact: critical
    description: |
      Foundation phase completed ahead of schedule.
      All infrastructure, CI/CD, documentation, and project structure in place.
    deliverables:
      - Repository structure (packages/, tests/, docs/)
      - pyproject.toml with uv
      - GitHub Actions CI/CD
      - Basic documentation
      - Hello world CLI

# Global Metrics (Aligned with ROADMAP_GLOBALE)
metrics:
  time_to_first_agent: "<5min"
  test_coverage: ">87%"
  documentation_coverage: "100%"
  api_response_p95: "<500ms"
  breaking_changes: 0
  tests_passing: 613

# New Capabilities Roadmap (Community Edition)
new_capabilities:
  execution_safety:
    description: "Production-grade execution isolation and safety"
    features:
      - Docker-based sandboxing
      - Resource limits and monitoring
      - Automatic rollback mechanisms
      - Artifact review and approval workflow
    target_version: "v0.1.0"

  iterative_execution:
    description: "AI-friendly retry and refinement workflows"
    features:
      - Follow-up execution with feedback
      - Human-in-the-loop workflows
      - Conditional retry logic
      - Context accumulation across attempts
    target_version: "v0.1.0"

  agent_profiles:
    description: "Flexible agent configuration management"
    features:
      - Multiple profiles per agent (variants)
      - Model switching per task type
      - Permission levels and autonomy settings
      - Context templates per profile
    target_version: "v0.1.0"

  git_integration:
    description: "Version control for AI-generated changes"
    features:
      - Branch per execution
      - Automatic commits and audit trail
      - PR/MR generation
      - Conflict resolution
    target_version: "v0.2.0"

  realtime_monitoring:
    description: "Live execution visibility and control"
    features:
      - WebSocket streaming API
      - Pause/resume/cancel controls
      - Progress indicators
      - Resource monitoring
    target_version: "v0.2.0"

  templates_quickstart:
    description: "Accelerated project setup"
    features:
      - Pre-built workflow templates
      - Quick-start wizards
      - Example gallery
      - Agent packs
    target_version: "v0.2.0"

  advanced_features:
    description: "Enterprise-grade observability"
    features:
      - Multi-channel notifications
      - Time travel debugging
      - A/B testing for agent configs
      - Comprehensive cost tracking
    target_version: "v0.2.0"

# Phases
phases:
  - id: phase_0
    name: "Foundation & Setup"
    duration: 1_week
    status: completed
    completed_date: "2025-12-24"
    priority: critical
    completion: 100%
    deliverables:
      - repository_structure
      - pyproject_toml
      - ci_cd_pipeline
      - basic_documentation
      - hello_world
    outcomes:
      - "10 packages structure created"
      - "CI/CD with GitHub Actions"
      - "Documentation framework"
      - "CLI hello command working"

  - id: phase_1
    name: "Core Domain"
    duration: 3_weeks
    status: completed
    started_date: "2025-12-24"
    completed_date: "2026-01-02"
    priority: critical
    completion: 100%
    deliverables:
      - domain_models
      - in_memory_persistence
      - event_bus
      - agent_inheritance
      - repository_pattern
    focus_areas:
      - "Agent inheritance resolution algorithm"
      - "Repository pattern (in-memory)"
      - "Event bus implementation"
      - "80%+ test coverage"
      - "Full CRUD operations"

  - id: phase_2
    name: "Multi-Provider & Multi-Framework"
    duration: 4_weeks
    status: completed
    completed_date: "2026-01-02"
    priority: high
    completion: 100%
    deliverables:
      - llm_abstraction
      - provider_adapters
      - framework_adapters
      - mcp_protocol
      - agent_factory

  - id: phase_3
    name: "Orchestration & API"
    duration: 4_weeks
    status: completed
    completed_date: "2026-01-04"
    priority: high
    completion: 100%
    deliverables:
      - workflow_orchestrator
      - rest_api
      - authentication
      - state_management_rollback
      - security_middleware

  - id: phase_4
    name: "Persistence & Production Scale"
    duration: 3_weeks
    status: completed
    completed_date: "2026-01-05"
    priority: high
    completion: 100%
    deliverables:
      - sqlite_persistence
      - database_migrations
      - storage_configuration
      - performance_optimization
      - observability
      - error_management_hardening
      - log_management_system # IMPLEMENTED - LogManager with search/aggregate
      - approval_workflow_api # IMPLEMENTED - Approval system (API routes)
      - yolo_mode # IMPLEMENTED - Auto-approve workflows (YOLO mode)
      - plan_mode # IMPLEMENTED - Workflow execution plan preview with cost/time estimates
      - dry_run_mode # IMPLEMENTED - Mock execution for testing with FIXED/RANDOM/ECHO strategies
      - ide_sync_generator # IMPLEMENTED - IDE instructions for 5 IDEs
      - cost_management_system # IMPLEMENTED - Full cost tracking and budget enforcement
      - mcp_tool_integration # IMPLEMENTED - Model Context Protocol CLI commands
      - pre_commit_hooks # VALIDATED - Comprehensive governance hooks configured
      - ci_cd_workflow_testing # VALIDATED - Matrix testing (3 OS × 3 Python versions)
    focus_areas:
      - "SQLite persistence layer"
      - "Alembic migrations"
      - "Storage configuration system"
      - "Repository SQLite implementations"
      - "Log aggregation and analysis (CrowdStrike best practices)"
      - "YOLO mode for auto-approving workflows (CI/CD support)"
      - "Plan Mode for workflow execution preview (DAG analysis)"
      - "Dry-Run Mode for cost-free testing (mocked LLM responses)"
      - "Approval workflow for agent artifacts"
      - "YOLO mode for auto-approving workflows (CI/CD support)"
    cli_commands:
      implemented:
        - paracle logs search # Search logs with filters
        - paracle logs aggregate # Aggregate log metrics
        - paracle logs stats # Log statistics
        - paracle logs anomalies # Detect anomalies
        - paracle logs cleanup # Clean old logs
        - paracle logs compress # Compress logs
        - paracle ide init # Initialize IDE configs
        - paracle ide sync # Sync IDE instructions
        - paracle ide list # List IDE integrations
        - paracle cost report # Generate cost report
        - paracle cost usage # View usage statistics
        - paracle cost budget # View budget status
        - paracle cost estimate # Estimate request cost
        - paracle cost pricing # Show model pricing
        - paracle cost cleanup # Clean old cost records
      planned:
        - paracle events list # Show recent events
        - paracle config show # Show configuration
        - paracle health # Health check

  - id: phase_5
    name: "Execution Safety & Isolation"
    duration: 3_weeks
    status: completed
    started_date: "2026-01-05"
    completed_date: "2026-01-06"
    priority: high
    completion: 100%
    deliverables:
      - sandbox_execution
      - docker_isolation
      - resource_limits
      - rollback_mechanisms
      - artifact_review_system
    focus_areas:
      - "Docker-based agent sandboxing"
      - "Resource limits (CPU, memory, timeout)"
      - "Filesystem isolation per execution"
      - "Automatic rollback on failure"
      - "Artifact review and approval workflow (API + CLI)"
    cli_commands:
      implemented:
        # Approval commands (Human-in-the-Loop)
        - paracle approvals list # List pending/decided approvals
        - paracle approvals get # Get approval details
        - paracle approvals approve # Approve a request
        - paracle approvals reject # Reject a request
        - paracle approvals cancel # Cancel a request
        - paracle approvals stats # Show statistics
        # Review commands (Artifact Reviews)
        - paracle reviews list # List artifact reviews
        - paracle reviews get # Get review details
        - paracle reviews approve # Approve artifact changes
        - paracle reviews reject # Reject with feedback
        - paracle reviews cancel # Cancel a review
        - paracle reviews stats # Show statistics
      planned:
        - paracle sandbox create # Create isolated environment
        - paracle sandbox list # List active sandboxes
        - paracle sandbox cleanup # Clean up sandboxes

  - id: phase_6
    name: "Developer Experience & Accessibility"
    duration: 4_weeks # Extended from 3 weeks
    status: planned
    priority: critical # Upgraded from high - drives adoption
    completion: 0%
    started_date: null
    completed_date: null
    strategic_focus: "ADR-017 - Reduce learning curve by ~50%"
    deliverables:
      - lite_mode_init # NEW: paracle init --lite
      - interactive_tutorial # NEW: paracle tutorial
      - example_gallery # NEW: 10+ production-ready examples
      - project_templates # NEW: Small/Medium/Enterprise templates
      - video_guides # NEW: 4-5 screen recordings
      - execution_chains # KEPT: Follow-up execution
      - agent_profiles # KEPT: Configuration variants
    focus_areas:
      - "Quick Start Mode - Minimal .parac/ for rapid prototyping (5 files vs 30+)"
      - "Interactive Tutorial - Built-in step-by-step guide with checkpoints"
      - "Example Gallery - Real-world examples (Support, DevOps, Data, Research)"
      - "Project Templates - Small (lite), Medium (full), Enterprise (+ security)"
      - "Video Guides - Visual learning (Getting Started, Inheritance, Deployment, MCP)"
      - "Follow-up execution with feedback loop (legacy from old Phase 6)"
      - "Agent configuration profiles for model variants"
    success_metrics:
      - "Time to first agent: < 2 minutes (down from ~10 min)"
      - "Tutorial completion rate: >70%"
      - "Example gallery: 10+ examples, each tested"
      - "User feedback: 'Easy to get started'"
    cli_commands:
      new:
        - paracle init --lite # Create minimal .parac/ structure
        - paracle upgrade --full # Graduate from lite to full mode
        - paracle tutorial # Launch interactive tutorial
        - paracle tutorial resume # Resume from checkpoint
        - paracle examples list # List available examples
        - paracle examples show # Show example details
        - paracle examples create # Create project from example
        - paracle templates list # List project templates
        - paracle init --template # Initialize from template
      kept:
        - paracle workflow retry # Retry with feedback
        - paracle workflow continue # Continue paused workflow
        - paracle profiles list # List agent profiles
        - paracle profiles create # Create profile variant

  - id: phase_7
    name: "Community Growth & Ecosystem"
    duration: 5_weeks # Extended from 4 weeks - added MCP Server
    status: planned
    priority: critical # Upgraded from medium - drives network effects
    completion: 0%
    started_date: null
    completed_date: null
    strategic_focus: "ADR-017 - Build vibrant ecosystem with network effects"
    deliverables:
      - mcp_server_implementation # NEW: Expose Paracle as MCP server
      - community_templates_marketplace # NEW: User-contributed templates
      - plugin_system_sdk # NEW: Extensibility for community
      - discord_community # NEW: Real-time support
      - monthly_webinars # NEW: Live demos and Q&A
      - blog_series # NEW: Technical content
      - git_workflow_manager # MOVED from old Phase 7
      - branch_per_execution # MOVED from old Phase 7
    focus_areas:
      - "MCP Server - Expose Paracle agents, tools, workflows as MCP services"
      - "Community Templates Marketplace - Agent/workflow sharing (GitHub-based)"
      - "Plugin System - SDK for providers, tools, adapters, observers"
      - "Discord Community - Setup channels, moderation, 500+ members target"
      - "Monthly Webinars - Topics: Overview, Inheritance, Production, MCP, Showcase"
      - "Blog Series - Getting Started (3), Advanced (5), Case Studies (3)"
      - "Git-backed workflow execution (legacy from old Phase 7)"
      - "Branch per execution for isolation"
    success_metrics:
      - "MCP Server: Expose all Paracle capabilities (agents, tools, workflows)"
      - "MCP integrations: Claude Desktop, Cline, others"
      - "Community templates: 50+ templates (core + community)"
      - "Plugin ecosystem: 10+ plugins (6 months)"
      - "Discord: 500+ members, <2hr response time"
      - "Webinars: 50+ live attendees, >500 video views"
      - "Blog: 20K+ total views (6 months)"
    cli_commands:
      new:
        - paracle mcp-server start # Start MCP server
        - paracle mcp-server stop # Stop MCP server
        - paracle mcp-server status # Server status
        - paracle mcp-server config # Configure server
        - paracle mcp-server tools # List exposed tools
        - paracle mcp-server resources # List exposed resources
        - paracle template search # Search community templates
        - paracle template install # Install from marketplace
        - paracle template publish # Publish to marketplace
        - paracle plugin search # Search available plugins
        - paracle plugin install # Install plugin
        - paracle plugin list # List installed plugins
        - paracle plugin dev # Developer mode for plugin
      kept:
        - paracle git init # Initialize git workflow
        - paracle git branches # List execution branches
        - paracle git merge # Merge execution branch
        - paracle git pr-create # Create pull request
        - paracle git cleanup # Cleanup merged branches

  - id: phase_8
    name: "Performance Optimization & Scale"
    duration: 4_weeks # Extended from 2 weeks
    status: planned
    priority: high # Upgraded from medium
    completion: 0%
    started_date: null
    completed_date: null
    strategic_focus: "ADR-017 - 2-3x performance improvement"
    deliverables:
      - response_caching # NEW: Redis/Valkey LLM response cache
      - connection_pooling # NEW: HTTP and DB connection reuse
      - benchmarking_suite # NEW: Performance baselines
      - performance_documentation # NEW: Optimization guide
      - websocket_streaming # KEPT: Real-time monitoring
      - workflow_templates # KEPT: Pre-built templates
    focus_areas:
      - "Response Caching - Redis/Valkey for LLM responses (30-50% cost reduction)"
      - "Connection Pooling - HTTP (providers) and DB connection reuse"
      - "Benchmarking Suite - pytest-benchmark, locust, CI integration"
      - "Performance Documentation - Tuning guide, profiling, troubleshooting"
      - "WebSocket API for live execution streaming (legacy from old Phase 8)"
      - "Pre-built workflow templates (RAG, multi-agent patterns)"
    success_metrics:
      - "Cache hit rate: >40%"
      - "Response time: 2x faster for cached requests"
      - "Cost reduction: >30% via caching"
      - "Concurrent requests: 100+ handled"
      - "Benchmark suite: Automated in CI"
    cli_commands:
      new:
        - paracle cache stats # Show cache statistics
        - paracle cache clear # Clear response cache
        - paracle cache config # Configure cache settings
        - paracle benchmark run # Run performance benchmarks
        - paracle benchmark compare # Compare benchmark results
        - paracle pool status # Show connection pool status
      kept:
        - paracle stream # Stream live execution logs
        - paracle pause # Pause running workflow
        - paracle resume # Resume paused workflow
        - paracle init --template # Initialize from template (moved to Phase 6)
        - paracle templates list # List available templates
        - paracle history compare # Compare execution versions

  - id: phase_9
    name: "Advanced Workflows & Kanban"
    duration: 3_weeks
    status: planned
    priority: medium
    completion: 0%
    deliverables:
      - human_in_the_loop # MOVED from old Phase 6
      - conditional_retry # MOVED from old Phase 6
      - kanban_task_management # MOVED from old Phase 6 (ADR-021)
      - automatic_commits # MOVED from old Phase 7
      - conflict_resolution # MOVED from old Phase 7
    focus_areas:
      - "Human-in-the-loop workflows (pause/review/continue)"
      - "Conditional retry based on validation"
      - "Context accumulation across attempts"
      - "Kanban task management (ADR-021)"
      - "Automatic commit of agent changes"
      - "Conflict resolution for concurrent executions"
    cli_commands:
      - paracle task list # List tasks by status
      - paracle task create # Create new task
      - paracle task move # Move task to status
      - paracle task assign # Assign to agent
      - paracle board show # Show Kanban board (CLI)
      - paracle board stats # Board statistics
      - paracle git commit # Commit agent changes
      - paracle git resolve # Conflict resolution wizard

  - id: phase_10
    name: "Enterprise Features & Polish"
    duration: 3_weeks
    status: planned
    priority: low
    completion: 0%
    deliverables:
      - execution_versioning
      - quick_start_wizards
      - process_control_advanced
      - merge_request_generation # MOVED from old Phase 7
    focus_areas:
      - "Execution versioning and comparison"
      - "Quick-start wizards for common patterns"
      - "Advanced process control (priority, scheduling)"
      - "GitHub/GitLab MR/PR generation"
    cli_commands:
      - paracle history compare # Compare execution versions
      - paracle wizard start # Launch setup wizard
      - paracle priority set # Set workflow priority
      - paracle schedule at # Schedule workflow execution

  - id: phase_9
    name: "Notifications & Advanced Features"
    duration: 2_weeks
    status: planned
    priority: low
    completion: 0%
    deliverables:
      - notification_system
      - multi_channel_alerts
      - time_travel_debugging
      - ab_testing
      - cost_tracking
    focus_areas:
      - "Multi-channel notifications (email, Slack, webhook)"
      - "Smart alerts (anomaly detection, cost thresholds)"
      - "Agent escalation on errors"
      - "Time travel debugging (replay executions)"
      - "A/B testing for agent configurations"
      - "Comprehensive cost tracking and reporting"
    cli_commands:
      planned:
        - paracle notify configure # Configure notification channels
        - paracle alerts list # List active alerts
        - paracle replay # Replay past execution
        - paracle compare # A/B test agent configs
        - paracle cost report # Generate cost report

  - id: phase_10
    name: "Polish & v0.1.0 Release"
    duration: 2_weeks
    status: planned
    priority: high
    deliverables:
      - comprehensive_docs
      - migration_guides
      - security_audit
      - performance_benchmarks
      - v0_1_0_release

# Persistence Implementation Details (Phase 4)
persistence_implementation:
  sqlite:
    package: "paracle_store"
    files:
      - "packages/paracle_store/database.py"
      - "packages/paracle_store/models.py"
      - "packages/paracle_store/sqlite_repository.py"
      - "packages/paracle_store/migrations/"
    tables:
      - agents: "Agent instances and status"
      - workflows: "Workflow definitions"
      - executions: "Workflow execution history"
      - events: "Event log"
      - audit: "Audit trail for ISO 42001"
      - sessions: "Work session data"

  configuration:
    file: "packages/paracle_core/storage.py"
    model: "StorageConfig"
    options:
      - workspace_path: "Path to .parac/ (default: .parac)"
      - database_url: "SQLite or PostgreSQL URL"
      - vector_store: "none | chroma | pgvector"

# MCP Server Implementation Details (Phase 7)
mcp_server_implementation:
  package: "paracle_mcp_server"
  description: "Expose Paracle capabilities as Model Context Protocol server"

  purpose: |
    Enable external AI applications (Claude Desktop, Cline, Continue, etc.)
    to use Paracle agents, tools, and workflows as MCP services.

  architecture:
    protocol: "Model Context Protocol v1.0"
    transport: "HTTP/JSON-RPC and stdio"
    server_framework: "FastAPI + MCP SDK"
    integration: "Standalone process or embedded in paracle serve"

  implementation_strategy:
    phase_1_core:
      - "Core MCP server implementation (Python MCP SDK)"
      - "Request/response handling with error handling"
      - "Logging and observability integration"
      - "Server lifecycle management"

    phase_2_capabilities:
      - "Core execution tools (8): agents, workflows, built-in tools"
      - "Provider management tools (5): list, test, configure"
      - "Cost tracking tools (6): reports, usage, budgets, estimates"
      - "Governance tools (7): roadmap, ADRs, questions, state"

    phase_3_advanced:
      - "Session management tools (5): start/end/status/history"
      - "IDE integration tools (4): sync, configure, init"
      - "Validation tools (5): validate, sync, check, fix"
      - "Log management tools (6): search, aggregate, analyze"
      - "Template tools (5): list, create, examples"

    phase_4_resources:
      - "Configuration & specs resources (5)"
      - "Runtime & state resources (4)"
      - "Governance resources (5)"
      - "Knowledge & memory resources (3)"
      - "Templates & skills resources (3)"

    phase_5_prompts:
      - "Generation templates (4): agent, workflow, tool, skill"
      - "Guidance templates (4): debugging, best practices, governance, inheritance"
      - "Task-specific templates (4): feature, bugfix, deployment, cost optimization"

    phase_6_integration:
      - "Claude Desktop integration config"
      - "Cline VS Code extension integration"
      - "Continue.dev integration"
      - "Generic MCP client integration guide"

  coverage_matrix:
    total_tools: 56
    tool_categories:
      - "Core Execution: 8 tools (agents, workflows, tools)"
      - "Provider Management: 5 tools (list, test, configure)"
      - "Cost Tracking: 6 tools (reports, usage, budgets)"
      - "Governance: 7 tools (roadmap, ADRs, state)"
      - "Sessions: 5 tools (lifecycle, history)"
      - "IDE Integration: 4 tools (sync, configure)"
      - "Validation: 5 tools (validate, sync, fix)"
      - "Log Management: 6 tools (search, aggregate, analyze)"
      - "Templates: 5 tools (list, create, examples)"

    total_resources: 21
    resource_categories:
      - "Configuration & Specs: 5 resources"
      - "Runtime & State: 4 resources"
      - "Governance: 5 resources"
      - "Knowledge: 3 resources"
      - "Templates: 3 resources"

    total_prompts: 12
    prompt_categories:
      - "Generation: 4 prompts"
      - "Guidance: 4 prompts"
      - "Task-Specific: 4 prompts"

  exposed_capabilities:
    tools:
      # Core Execution (8 tools)
      - "paracle_run_agent: Execute any Paracle agent with inputs"
      - "paracle_run_workflow: Execute any Paracle workflow"
      - "paracle_list_agents: List all available agents"
      - "paracle_list_workflows: List all available workflows"
      - "paracle_get_agent_spec: Get detailed agent specification"
      - "paracle_get_workflow_spec: Get detailed workflow definition"
      - "paracle_execute_tool: Call any Paracle built-in tool"
      - "paracle_list_tools: List all available tools (built-in + MCP)"

      # Provider Management (5 tools)
      - "paracle_list_providers: List all LLM providers (OpenAI, Anthropic, etc.)"
      - "paracle_test_provider: Test provider connection and API key"
      - "paracle_get_provider_config: Get provider configuration details"
      - "paracle_set_default_provider: Set default provider for agents"
      - "paracle_get_provider_models: List available models for provider"

      # Cost Tracking & Budgets (6 tools)
      - "paracle_get_cost_report: Get cost report (daily/weekly/monthly)"
      - "paracle_get_usage_stats: View token usage statistics"
      - "paracle_get_budget_status: Check budget status and alerts"
      - "paracle_estimate_cost: Estimate cost for agent/workflow execution"
      - "paracle_set_budget: Set cost budget limits"
      - "paracle_get_cost_breakdown: Detailed cost breakdown by agent/provider"

      # Governance & Planning (7 tools)
      - "paracle_query_roadmap: Query roadmap (phases, deliverables, status)"
      - "paracle_get_current_phase: Get current project phase"
      - "paracle_list_adrs: List Architecture Decision Records"
      - "paracle_get_adr: Get specific ADR by ID"
      - "paracle_get_open_questions: List open questions and blockers"
      - "paracle_get_project_state: Get current project state from .parac/"
      - "paracle_update_progress: Update phase progress and status"

      # Session Management (5 tools)
      - "paracle_session_start: Start new work session"
      - "paracle_session_end: End current session with summary"
      - "paracle_session_status: Get current session status"
      - "paracle_list_sessions: List recent work sessions"
      - "paracle_get_session_summary: Get session summary and actions"

      # IDE Integration (4 tools)
      - "paracle_sync_ide: Sync IDE instructions (.github/copilot-instructions.md)"
      - "paracle_list_ide_configs: List IDE integration configurations"
      - "paracle_get_ide_config: Get specific IDE configuration"
      - "paracle_init_ide: Initialize IDE integration for project"

      # Validation & Sync (5 tools)
      - "paracle_validate_workspace: Validate .parac/ workspace integrity"
      - "paracle_sync_workspace: Sync workspace state and regenerate manifest"
      - "paracle_check_governance: Check governance alignment (roadmap/state)"
      - "paracle_validate_yaml: Validate YAML file syntax"
      - "paracle_fix_issues: Auto-fix common workspace issues"

      # Log Management (6 tools)
      - "paracle_search_logs: Search logs with filters (level, agent, date)"
      - "paracle_aggregate_logs: Aggregate log metrics and statistics"
      - "paracle_get_log_stats: Get log statistics (errors, warnings, info)"
      - "paracle_detect_anomalies: Detect log anomalies and issues"
      - "paracle_get_agent_actions: Get agent action log entries"
      - "paracle_get_execution_logs: Get logs for specific execution"

      # Templates & Examples (5 tools)
      - "paracle_list_templates: List available project templates"
      - "paracle_get_template: Get template details and structure"
      - "paracle_create_from_template: Create project from template"
      - "paracle_list_examples: List available examples"
      - "paracle_get_example: Get example code and documentation"

    resources:
      # Configuration & Specs
      - "parac://agents/{agent_id}: Agent specifications from .parac/agents/specs/"
      - "parac://workflows/{workflow_id}: Workflow definitions from .parac/workflows/"
      - "parac://tools/{tool_id}: Tool configurations"
      - "parac://providers/{provider_id}: Provider configurations"
      - "parac://policies/{policy_name}: Policy files (CODE_STYLE, TESTING, SECURITY)"

      # Runtime & State
      - "parac://executions/{exec_id}: Execution results and outputs"
      - "parac://logs/{session_id}: Session logs"
      - "parac://state/current: Current project state (current_state.yaml)"
      - "parac://sessions/{session_id}: Session data and checkpoints"

      # Governance & Planning
      - "parac://roadmap/phases: Roadmap phases and deliverables"
      - "parac://roadmap/current: Current phase information"
      - "parac://adrs/{adr_id}: Architecture Decision Records"
      - "parac://questions/open: Open questions from open_questions.md"
      - "parac://decisions/log: Decision log entries"

      # Knowledge & Memory
      - "parac://knowledge/{topic}: Knowledge base articles"
      - "parac://memory/context: Context files (current_state, open_questions)"
      - "parac://memory/summaries: Session and phase summaries"

      # Templates & Skills
      - "parac://templates/{template_id}: Project templates"
      - "parac://skills/{skill_id}: Agent skills"
      - "parac://examples/{example_id}: Example projects"

    prompts:
      # Templates & Generation
      - "agent_template: Generate agent specification with inheritance"
      - "workflow_template: Generate workflow definition with steps"
      - "tool_template: Generate custom tool implementation"
      - "skill_template: Generate agent skill definition"

      # Guidance & Help
      - "debugging_guide: Debug Paracle issues (common problems + solutions)"
      - "best_practices: Paracle best practices and conventions"
      - "governance_guide: Governance workflow and .parac/ management"
      - "inheritance_guide: Agent inheritance patterns and examples"

      # Task-Specific
      - "feature_workflow: Generate feature development workflow"
      - "bugfix_workflow: Generate bugfix workflow"
      - "deployment_guide: Deployment and production setup"
      - "cost_optimization: Cost optimization strategies"

  files:
    - "packages/paracle_mcp_server/__init__.py"
    - "packages/paracle_mcp_server/server.py: Main MCP server"
    - "packages/paracle_mcp_server/handlers.py: Request handlers"
    - "packages/paracle_mcp_server/tools.py: Tool implementations"
    - "packages/paracle_mcp_server/resources.py: Resource providers"
    - "packages/paracle_mcp_server/prompts.py: Prompt templates"
    - "packages/paracle_mcp_server/config.py: Server configuration"

  configuration:
    server_modes:
      - standalone: "Run as separate process (paracle mcp-server start)"
      - embedded: "Embed in paracle serve with /mcp endpoint"
      - stdio: "Standard I/O for Claude Desktop integration"

    options:
      - port: "MCP server port (default: 3100)"
      - host: "Bind address (default: 127.0.0.1)"
      - mode: "http | stdio (default: http)"
      - auth: "API key authentication (optional)"
      - cors: "CORS configuration for web clients"
      - rate_limit: "Rate limiting per client"

  integration_examples:
    claude_desktop:
      config_file: "~/Library/Application Support/Claude/claude_desktop_config.json"
      config:
        mcpServers:
          paracle:
            command: "paracle"
            args: ["mcp-server", "start", "--mode", "stdio"]

    cline_vscode:
      config_file: ".vscode/settings.json"
      config:
        cline.mcpServers:
          - name: "paracle"
            url: "http://localhost:3100"

    continue_dev:
      config_file: "~/.continue/config.json"
      config:
        mcpServers:
          - name: "paracle"
            url: "http://localhost:3100"

  cli_commands:
    - "paracle mcp-server start: Start MCP server"
    - "paracle mcp-server stop: Stop MCP server"
    - "paracle mcp-server status: Check server status"
    - "paracle mcp-server config: Show/edit configuration"
    - "paracle mcp-server tools: List exposed tools"
    - "paracle mcp-server resources: List exposed resources"
    - "paracle mcp-server test: Test MCP server connectivity"
    - "paracle mcp-server integrate: Generate integration configs"

  acceptance_criteria:
    - "✅ MCP protocol v1.0 compliance"
    - "✅ 56+ tools exposed covering ALL Paracle capabilities (9 categories)"
    - "✅ Core execution tools (8): agents, workflows, built-in tools"
    - "✅ Provider management tools (5): list, test, configure"
    - "✅ Cost tracking tools (6): reports, usage, budgets, estimates"
    - "✅ Governance tools (7): roadmap, ADRs, questions, state"
    - "✅ Session management tools (5): lifecycle, history"
    - "✅ IDE integration tools (4): sync, configure"
    - "✅ Validation tools (5): validate, sync, fix"
    - "✅ Log management tools (6): search, aggregate, analyze"
    - "✅ Template tools (5): list, create, examples"
    - "✅ 21+ resources exposed (specs, state, governance, knowledge, templates)"
    - "✅ 12+ prompt templates (generation, guidance, workflows)"
    - "✅ Resource access to .parac/ files (agents, workflows, state, governance)"
    - "✅ HTTP and stdio transport support"
    - "✅ Authentication and rate limiting"
    - "✅ Integration configs for Claude, Cline, Continue"
    - "✅ Comprehensive documentation (setup, API, tools, resources, prompts)"
    - "✅ Capability coverage matrix"
    - "✅ Example integrations and demos"
    - "✅ Test suite for MCP endpoints (all tool categories)"

  success_metrics:
    - "MCP server starts in <2 seconds"
    - "Tool calls respond in <500ms (excluding agent execution)"
    - "Resource reads respond in <100ms"
    - "Supports 50+ concurrent MCP clients"
    - "56+ tools exposed covering ALL Paracle capabilities"
    - "21+ resources exposed (specs, state, governance, knowledge)"
    - "12+ prompt templates (generation, guidance, workflows)"
    - "9 capability categories fully covered (execution, providers, costs, governance, sessions, IDE, validation, logs, templates)"
    - "Integration with 3+ AI applications (Claude, Cline, Continue)"
    - "Complete platform functionality accessible via MCP protocol"
    - "Documentation with setup guides for each integration"
    - "Comprehensive tool reference with examples"

  documentation:
    - "docs/mcp-server.md: MCP server overview and architecture"
    - "docs/mcp-server-setup.md: Installation and setup guide"
    - "docs/mcp-integrations.md: Integration guides (Claude, Cline, Continue)"
    - "docs/mcp-server-api.md: Complete API reference (56+ tools)"
    - "docs/mcp-server-tools.md: Tool reference by category (execution, providers, costs, etc.)"
    - "docs/mcp-server-resources.md: Resource URI reference"
    - "docs/mcp-server-prompts.md: Prompt template reference"
    - "docs/mcp-capability-matrix.md: Capability coverage matrix"
    - "examples/mcp_server_demo.py: Demo script"
    - "examples/mcp_custom_integration.py: Custom integration example"

# Error Management Roadmap
error_management:
  current_state: "production_ready"
  rating: "8/10"

  # Implemented (Phase 0-4)
  implemented:
    - layer_specific_exceptions: "All packages have exceptions.py with error codes"
    - error_codes: "PARACLE-XXX-NNN format across all packages"
    - rfc_7807: "Problem Details in API responses"
    - exception_chaining: "Proper __cause__ usage"
    - structured_logging: "Correlation IDs, audit trail"
    - retry_logic: "RetryableProvider with exponential backoff"

# Dependencies
dependencies:
  phase_1: [phase_0]
  phase_2: [phase_1]
  phase_3: [phase_2]
  phase_4: [phase_3]
  phase_5: [phase_4]
  phase_6: [phase_5]
  phase_7: [phase_6]
  phase_8: [phase_5, phase_6] # Can run parallel with phase_7
  phase_9: [phase_8]
  phase_10: [phase_7, phase_9]

# Success Criteria
success_criteria:
  - functional_mvp
  - early_adopter_ready
  - stable_api
  - comprehensive_tests
  - production_ready_architecture
  - persistent_storage

# Link to Global Roadmap
global_roadmap:
  reference: ".roadmap/ROADMAP_GLOBALE.yaml"
  scope: "v0.0.1 - v0.2.0 (Phases 0-10)"
  community_edition: "Phases 0-10 (no UI/dashboard)"
  enterprise_edition: "Adds visual dashboard, team collaboration UI"
  future_phases: "v0.5.0 - v1.0.0 defined in global roadmap"

# Edition Differentiation
editions:
  community:
    description: "Full-featured CLI and API for programmatic control"
    includes:
      - "All core framework features"
      - "Execution safety and isolation"
      - "Iterative workflows and agent profiles"
      - "Git integration"
      - "Real-time monitoring (API/WebSocket)"
      - "Templates and quick-start"
      - "Notifications and alerts"
      - "Cost tracking and reporting"
    excludes:
      - "Web UI dashboard"
      - "Visual workflow builder"
      - "Kanban board interface"
      - "Graphical code review UI"
    target_users: "Developers, DevOps, CLI power users"

  enterprise:
    description: "Community + visual interfaces for team collaboration"
    additional_features:
      - "React-based web dashboard"
      - "Visual workflow builder (drag-and-drop)"
      - "Kanban board for workflow management"
      - "Graphical diff viewer"
      - "Team collaboration features"
      - "Role-based access control (RBAC)"
      - "Multi-tenant support"
    target_users: "Teams, enterprises, non-technical stakeholders"
    target_version: "v1.0.0+"
